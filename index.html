<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<title>Asana | San Francisco Pet Adoption Agency</title>
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="stylesheet" type="text/css" href="assets/styles/site.css">
<script
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>

</head>

<body>
	<div id="container">
		<header id="header"></header>

		<main id="content">
			<div id="gallery-main">
				<div id="gallery-main-nav">
					<div id="main-nav-prev"></div>
					<div id="main-nav-next"></div>
				</div>
			</div>
			<div id="gallery-thumb">
				<div id="gallery-thumb-nav">
					<div id="thumb-nav-prev" onClick="navigateGallery(this.id,'previous');">PREV</div>
					<div id="thumb-nav-next" onClick="navigateGallery(this.id, 'next');">NEXT</div>
				</div>
			</div>
		</main>
		<footer id="footer">
		</footer>
		
	</div>
	
<script>
var dataImages = [];
var dataSources = [];
var imageList = [];
	
var length = 0;	
var thisIndex = 0;
	
var fileName = "assets/data/dogs.json";
	
var galleryMain = $("#gallery-main");
var header = $("#header");
var footer = $("#footer");


// get header and footer
$.get("assets/snippets/header.html", function(data) {
	header.html(data);
});
$.get("assets/snippets/footer.html", function(data) {
	footer.html(data);
});

// fetch JSON from file
$.getJSON( fileName, function( data ) {
	$.each( data.dogs, function( key, val ) {	
		dataImages.push(val.image);
		dataSources.push(val.source);

	});
	console.log(dataImages.length + " values fetched");

	// put html blocks into ImageList[]
	createImageList();
	updateGalleryMain(thisIndex);
});	

// create HTML for images and put into imageList[]
function createImageList() {
	length = dataImages.length;
	
	for (i = 0; i < length; i++) {
		var str = "<div class='dog-image' id='" + i + "'><img src='/dog-image-gallery" + dataImages[i] + "' alt='asana: san francisco pet adoption agency' title='asana: san francisco pet adoption agency'></div>";

		imageList[i] = str;
	}
	console.log(length + " images created");

}
	
// fetch image from ImageList[] and put into main gallery
function updateGalleryMain(index) {
	galleryMain.append().html(imageList[index]);
}

// go to next/previous image if there is one to go to
function navigateGallery(id, direction) {
	var thisElement = document.getElementById(id);
	let updateGallery = false;
	if (direction == "previous") {
		
		if (thisIndex >= 1) {
			thisIndex--;
		
			if (thisIndex === 0) {
				thisElement.classList.add("disabled");

			}
			else if (thisIndex == length - 2) {

				thisElement.nextElementSibling.classList.remove("disabled");
			}
			updateGallery = true;
		}

	}
	else if (direction == "next") {
		if (thisIndex < length - 1) {
			thisIndex++;
			
			if (thisIndex == length - 1) {
				thisElement.classList.add("disabled");
			}
			else if (thisIndex === 1) {
				thisElement.previousElementSibling.classList.remove("disabled");
	
			}
			updateGallery = true;
		}
	}
	if (updateGallery === true) {
		updateGalleryMain(thisIndex);
		console.log(thisIndex);
	}
}

</script>
</body>
</html>
